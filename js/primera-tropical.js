var dataFiltered,temp="ยบC",barPadding=2,margin={top:50,right:50,bottom:50,left:110},width=1200-margin.left-margin.right,height=500-margin.top-margin.bottom,color=d3.scaleLinear().domain([10,35]).range(["#d39c83","#e34f6f","#7c1d6f"]),div=d3.select(".grafica-temp").append("div").attr("class","tooltip").style("opacity",0),svg=d3.select(".grafica-temp").append("svg").attr("class","chart-temp").attr("viewBox","0 0 "+(width+margin.left+margin.right)+" "+(height+margin.top+margin.bottom)).append("g").attr("transform","translate("+(margin.left-margin.right)+","+margin.top+")"),xRange=d3.scaleLinear().range([30,width]),yRange=d3.scaleLinear().range([height,-20]),xAxis=d3.axisBottom(xRange).tickPadding(15).tickFormat(d3.format("d")).tickSize(-height).ticks(20),yAxis=d3.axisLeft(yRange).tickPadding(10).tickFormat(function(a){return a+temp}).tickSize(30-width).ticks(6);d3.csv("csv/primera-noche-tropial.csv",function(a,t){dataFiltered.forEach(function(a){a.fecha=a.fecha,a.year=+a.year}),xRange.domain([d3.min(dataFiltered,function(a){return a.year}),d3.max(dataFiltered,function(a){return a.year})]),yRange.domain([d3.min(dataFiltered,function(a){return a.fecha}),d3.max(dataFiltered,function(a){return a.fecha})]),svg.append("g").attr("class","xAxis").attr("transform","translate(0,400)").transition().duration(1e3).call(xAxis),svg.append("g").attr("class","yAxis").attr("transform","translate(30, 0)").transition().duration(1e3).call(yAxis),svg.append("text").attr("class","legend-top").attr("transform","rotate(0)").attr("y",-20).attr("x",190),svg.selectAll("dot").data(dataFiltered).enter().append("circle").attr("class","circles").on("mouseover",function(a){div.transition(),div.style("opacity",1).html('<p class="tooltipYear">'+a.year+'<p/><p class="tooltipTemp">'+a.maxima+"ยบ<p/>").style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(a){div.transition().duration(200).style("opacity",0)}).transition().duration(1e3).attr("cx",function(a){return xRange(a.year)}).attr("cy",function(a){return yRange(a.maxima)}).attr("r",function(a){return a.maxima===maxTemp?12:a.maxima===minTemp?6:35<=a.maxima?11:30<=a.maxima?10:25<=a.maxima?9:20<=a.maxima?8:15<=a.maxima?7:6}).style("fill",function(a){return a.maxima===maxTemp?"#70284a":a.maxima===minTemp?"#045275":35<=a.maxima?"#9c3f5d":30<=a.maxima?"#c8586c":25<=a.maxima?"#dc7176":20<=a.maxima?"#ee8a82":15<=a.maxima?"#ee8a82":10<=a.maxima?"#4cc8a3":7<=a.maxima?"#38b2a3":3<=a.maxima?"#2c98a0":(a.maxima,"#257d98")})});