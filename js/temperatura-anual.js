function temperaturaMedia(){var t=48,a=48,e=48,r=48,n=900-r-a,s=550-t-e,c=d3.select(".temperatura-media-chart-container").append("svg").attr("class","temperatura-media-chart-graph").attr("width",n+r+a).attr("height",s+t+e).append("g").attr("transform","translate("+r+","+t+")"),i=(d3.timeParse("%Y"),d3.bisector(function(t){return t.fecha}).left),o=d3.scaleTime().range([0,n]),l=d3.scaleLinear().range([s,10]),d=d3.area().x(function(t){return o(t.fecha)}).y0(s).y1(function(t){return l(t.temperatura)}).curve(d3.curveCardinal.tension(.6)),p=d3.axisLeft(l).tickSize(-n).tickFormat(function(t){return t+"ÂºC"}).ticks(5),u=d3.axisBottom(o).tickFormat(d3.format("d")).ticks(10);d3.csv("csv/temperatura-media.csv",function(m,f){if(m)throw m;f.forEach(function(t){t.fecha=t.fecha,t.temperatura=+t.temperatura}),o.domain(d3.extent(f,function(t){return t.fecha})),l.domain([13,18]);c.append("path").data([f]).attr("class","line").attr("d",d).attr("stroke-width","1.5").attr("fill","none");c.append("g").attr("class","x-axis").attr("transform","translate(0,"+s+")").call(u),c.append("g").attr("class","y-axis").call(p);var h=c.append("g").attr("class","focus").style("display","none");h.append("line").attr("class","x-hover-line hover-line").attr("y1",0).attr("y2",s),h.append("line").attr("class","y-hover-line hover-line").attr("x1",n).attr("x2",n),h.append("circle").attr("class","circle-focus").attr("r",8),h.append("text").attr("class","text-focus").attr("x",-20).attr("y",-20).attr("dy",".31em"),c.append("rect").attr("class","overlay").attr("width",n+r+a).attr("height",s+t+e).on("mouseover",function(){h.style("display",null)}).on("mouseout",function(){h.style("display","none")}).on("mousemove",function(){var t=o.invert(d3.mouse(this)[0]),a=i(f,t,1),e=f[a-1],r=f[a],c=t-e.fecha>r.fecha-t?r:e;h.attr("transform","translate("+o(c.fecha)+","+l(c.temperatura)+")"),h.select("text").text(c.temperatura+"ÂºC"),h.select(".x-hover-line").attr("transform","translate("+o(c.fecha)+","+l(c.temperatura)+")").attr("y2",s-l(c.temperatura)),h.select(".y-hover-line").attr("transform","translate("+-1*n+","+l(c.temperatura)+")").attr("x2",n+n)})})}temperaturaMedia();