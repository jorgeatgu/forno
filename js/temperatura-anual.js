function temperaturaMedia(){var t={top:48,right:48,bottom:48,left:48},a=900-t.left-t.right,e=550-t.top-t.bottom,r=d3.select(".temperatura-media-chart-container").append("svg").attr("class","temperatura-media-chart-graph").attr("width",a+t.left+t.right).attr("height",e+t.top+t.bottom).append("g").attr("transform","translate("+t.left+","+t.top+")"),n=(d3.timeParse("%Y"),d3.bisector(function(t){return t.fecha}).left),o=d3.scaleTime().range([0,a]),s=d3.scaleLinear().range([e,10]),i=d3.area().x(function(t){return o(t.fecha)}).y0(e).y1(function(t){return s(t.temperatura)}).curve(d3.curveCardinal.tension(.6)),c=d3.axisLeft(s).tickSize(-a).tickFormat(function(t){return t+"ÂºC"}).ticks(5),l=d3.axisBottom(o).tickFormat(d3.format("d")).ticks(10);d3.csv("csv/temperatura-media.csv",function(p,d){if(p)throw p;d.forEach(function(t){t.fecha=t.fecha,t.temperatura=+t.temperatura}),o.domain(d3.extent(d,function(t){return t.fecha})),s.domain([13,18]);r.append("path").data([d]).attr("class","line").attr("d",i).attr("stroke-width","1.5").attr("fill","none");r.append("g").attr("class","x-axis").attr("transform","translate(0,"+e+")").call(l),r.append("g").attr("class","y-axis").call(c);var u=r.append("g").attr("class","focus").style("display","none");u.append("line").attr("class","x-hover-line hover-line").attr("y1",0).attr("y2",e),u.append("line").attr("class","y-hover-line hover-line").attr("x1",a).attr("x2",a),u.append("circle").attr("class","circle-focus").attr("r",8),u.append("text").attr("class","text-focus").attr("x",-20).attr("y",-20).attr("dy",".31em"),r.append("rect").attr("class","overlay").attr("width",a+t.left+t.right).attr("height",e+t.top+t.bottom).on("mouseover",function(){u.style("display",null)}).on("mouseout",function(){u.style("display","none")}).on("mousemove",function(){var t=o.invert(d3.mouse(this)[0]),r=n(d,t,1),i=d[r-1],c=d[r],l=t-i.fecha>c.fecha-t?c:i;u.attr("transform","translate("+o(l.fecha)+","+s(l.temperatura)+")"),u.select("text").text(l.temperatura+"ÂºC"),u.select(".x-hover-line").attr("transform","translate("+o(l.fecha)+","+s(l.temperatura)+")").attr("y2",e-s(l.temperatura)),u.select(".y-hover-line").attr("transform","translate("+-1*a+","+s(l.temperatura)+")").attr("x2",a+a)})})}temperaturaMedia();