function temperaturaMedia(){var a=48,e=48,r=48,n=48,i=900-n-e,o=550-a-r,l=d3.select(".temperatura-media-chart-container").append("svg").attr("class","temperatura-media-chart-graph").attr("width",i+n+e).attr("height",o+a+r).append("g").attr("transform","translate("+n+","+a+")"),d=(d3.timeParse("%Y"),d3.bisector(function(t){return t.fecha}).left),p=d3.scaleTime().range([0,i]),u=d3.scaleLinear().range([o,10]),m=d3.area().x(function(t){return p(t.fecha)}).y0(o).y1(function(t){return u(t.temperatura)}).curve(d3.curveCardinal.tension(.6)),f=d3.axisLeft(u).tickSize(-i).tickFormat(function(t){return t+"ÂºC"}).ticks(5),h=d3.axisBottom(p).tickFormat(d3.format("d")).ticks(10);d3.csv("csv/temperatura-media.csv",function(t,s){if(t)throw t;s.forEach(function(t){t.fecha=t.fecha,t.temperatura=+t.temperatura}),p.domain(d3.extent(s,function(t){return t.fecha})),u.domain([13,18]);l.append("path").data([s]).attr("class","line").attr("d",m).attr("stroke-width","1.5").attr("fill","none");l.append("g").attr("class","x-axis").attr("transform","translate(0,"+o+")").call(h),l.append("g").attr("class","y-axis").call(f);var c=l.append("g").attr("class","focus").style("display","none");c.append("line").attr("class","x-hover-line hover-line").attr("y1",0).attr("y2",o),c.append("line").attr("class","y-hover-line hover-line").attr("x1",i).attr("x2",i),c.append("circle").attr("class","circle-focus").attr("r",8),c.append("text").attr("class","text-focus").attr("x",-20).attr("y",-20).attr("dy",".31em"),l.append("rect").attr("class","overlay").attr("width",i+n+e).attr("height",o+a+r).on("mouseover",function(){c.style("display",null)}).on("mouseout",function(){c.style("display","none")}).on("mousemove",function(){var t=p.invert(d3.mouse(this)[0]),a=d(s,t,1),e=s[a-1],r=s[a],n=t-e.fecha>r.fecha-t?r:e;c.attr("transform","translate("+p(n.fecha)+","+u(n.temperatura)+")"),c.select("text").text(n.temperatura+"ÂºC"),c.select(".x-hover-line").attr("transform","translate("+p(n.fecha)+","+u(n.temperatura)+")").attr("y2",o-u(n.temperatura)),c.select(".y-hover-line").attr("transform","translate("+-1*i+","+u(n.temperatura)+")").attr("x2",i+i)})})}temperaturaMedia();