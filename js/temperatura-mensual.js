function temperaturaMensual(){var t=50,a=50,e=50,n=110,r=1200-n-a,i=500-t-e,s=d3.select(".temperatura-mensual-chart-container").append("svg").attr("class","temperatura-mensual-chart-graph").attr("width",r+n+a).attr("height",i+t+e).append("g").attr("transform","translate("+n+","+t+")"),m=d3.scaleTime().range([0,r]),u=d3.scaleLinear().range([i,10]),o=d3.area().x(function(t){return m(t.fecha)}).y0(i).y1(function(t){return u(t.max)}),c=d3.line().x(function(t){return m(t.fecha)}).y(function(t){return u(t.max)}),l=d3.axisLeft(u).tickSize(-r).tickFormat(function(t){return t+temp}).ticks(5),d=d3.axisBottom(m).tickFormat(d3.format("d")).ticks(10),p=d3.select(".media-mensual-maxima").append("div").attr("class","tooltip tooltip-media-mensual-maxima");d3.csv("csv/total-media-limpio.csv",function(t,a){if(t)throw t;var e=d3.nest().key(function(t){return t.mes}).entries(a),n=d3.select("#mes-mensual");n.append("select").selectAll("option").data(e).enter().append("option").attr("value",function(t){return t.key}).text(function(t){return t.key}),n.on("change",function(){!function(t){d3.csv("csv/total-media-limpio.csv",function(a,e){(e=e.filter(function(a){return String(a.mes).match(t)})).forEach(function(t){t.max=+t.max}),m.domain([1951,2018]),u.domain([d3.min(e,function(t){return t.max-5}),d3.max(e,function(t){return t.max+5})]),d3.select(".yAxisTemperaturaMM").transition().duration(600).call(l);var n=s.selectAll(".area-temperatura-mensual").data([e]);n.transition().duration(600).ease(d3.easeLinear).attr("d",o);var r=s.selectAll(".line-temperatura-mensual").data([e]);r.transition().duration(600).ease(d3.easeLinear).attr("d",c),p.data(e).html(function(t){return"<p class='tooltip-media-mensual'>La temperatura máxima fue de <strong>"+d3.max(e,function(t){return t.max})+"ºC</strong> en <strong>"+t.yearmax}),r.exit().remove(),n.exit().remove()})}(d3.select(this).select("select").property("value"))}),(a=a.filter(function(t){return String(t.mes).match(/Febrero/)})).forEach(function(t){t.max=t.max,t.fecha=t.fecha,t.mes=t.mes}),m.domain([1951,2018]),u.domain([1,20]),s.append("path").data([a]).attr("class","area-temperatura-mensual").attr("d",o),s.append("path").data([a]).attr("class","line-temperatura-mensual").attr("d",c).style("stroke","#140320").style("opacity","0.5"),s.append("g").attr("class","xAxisTemperaturaMM").attr("transform","translate(0,"+i+")").call(d),s.append("g").attr("class","yAxisTemperaturaMM").call(l),p.data(a).html(function(t){return"<p class='tooltip-media-mensual'>La temperatura máxima fue de <strong>"+d3.max(a,function(t){return t.max})+"ºC</strong> en <strong>"+t.yearmin})})}mesMenuMensual=[],tempMax=[],temperaturaMensual();