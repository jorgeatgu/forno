function loadCSV(){d3.csv("temperaturas-prueba.csv",function(t,a){function r(t){return t.split("-")[2]}datos=a,datos=a.filter(function(t){return String(t.fecha).match(/01-09/)}),datos.forEach(function(t){t.fecha=t.fecha,t.maxima=+t.maxima,t.minima=+t.minima,t.year=r(t.fecha)}),pintando()})}function pintando(){var t=d3.select("body").append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom);t.selectAll("rect").data(datos).enter().append("rect").attr("class","barra").attr("width",23.5).attr("height",100).attr("x",function(t,a){return 23.5*a+30}).attr("height",function(t){return 5*t.maxima}).attr("y",function(t){return height-5*t.maxima}),t.selectAll("text").data(datos).enter().append("text").text(function(t){return t.maxima}).attr("x",function(t,a){return 23.5*a+30}).attr("y",function(t){return height-5.1*t.maxima}).attr("class","textoBarras"),xRange=d3.scale.linear().range([0,width]).domain([d3.min(datos,function(t){return t.year}),d3.max(datos,function(t){return t.year})]),yRange=d3.scale.linear().range([height,0]).domain([d3.min(datos,function(t){return t.maxima}),d3.max(datos,function(t){return t.maxima})]);var a=d3.svg.axis().scale(xRange).orient("bottom").ticks(62);t.append("g").attr("class","axis").attr("transform","translate(30,490)").call(a);var r=d3.svg.axis().scale(yRange).orient("left").ticks(6);t.append("g").attr("class","axis").attr("transform","translate(30, 0)").call(r),t.attr("class","principal")}var datos=[],margin={top:30,right:50,bottom:30,left:110},width=1600-margin.left-margin.right,height=550-margin.top-margin.bottom;widthBar=width/62,loadCSV();