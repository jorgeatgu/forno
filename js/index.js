function menu(){var t=document.querySelector(".overlay"),a=document.querySelector(".navegacion"),e=document.querySelector("body"),n=document.querySelectorAll(".navegacion-btn"),r=document.querySelector(".burger");function o(){r.classList.toggle("clicked"),t.classList.toggle("show"),a.classList.toggle("show"),e.classList.toggle("overflow")}for(document.querySelector(".burger").addEventListener("click",o),document.querySelector(".overlay").addEventListener("click",o),i=0;i<n.length;i++)n[i].addEventListener("click",function(){c()});function c(){t.classList.remove("show"),a.classList.remove("show"),r.classList.remove("clicked")}}var dataFiltered;menu();var temp="ºC",barPadding=2,dedicatoria="Dedicado a Maria del Carmen Tobajas Urieta y Agustín Aznar Gracia. Gracias por todo.";console.log(dedicatoria);var margin={top:50,right:50,bottom:50,left:110},width=1200-margin.left-margin.right,height=500-margin.top-margin.bottom,div=d3.select(".grafica-temp").append("div").attr("class","tooltip").style("opacity",0);function getYear(t){return t.split("-")[2]}var svg=d3.select(".grafica-temp").append("svg").attr("class","chart-temp").attr("viewBox","0 0 "+(width+margin.left+margin.right)+" "+(height+margin.top+margin.bottom)).append("g").attr("transform","translate("+(margin.left-margin.right)+","+margin.top+")"),xRange=d3.scaleLinear().range([30,width]),yRange=d3.scaleLinear().range([height,-20]),xAxis=d3.axisBottom(xRange).tickPadding(15).tickFormat(d3.format("d")).tickSize(-height).ticks(20),yAxis=d3.axisLeft(yRange).tickPadding(10).tickFormat(function(t){return t+temp}).tickSize(30-width).ticks(6);function update(){var t=d3.select("#updateButtonDay").property("value"),a=d3.select("#updateButtonMonth").property("value");t<10&&(t=("0"+t).slice(-2)),a<10&&(a=("0"+a).slice(-2));var i=new RegExp("^.*"+(t+"-"+a)+".*","gi");d3.csv("csv/temperaturas.csv",function(t,a){(dataFiltered=a.filter(function(t){return String(t.fecha).match(i)})).forEach(function(t){t.fecha=t.fecha,t.maxima=+t.maxima,t.minima=+t.minima,t.year=getYear(t.fecha)}),maxTemp=d3.max(dataFiltered,function(t){return t.maxima}),minTemp=d3.min(dataFiltered,function(t){return t.maxima}),xRange.domain([d3.min(dataFiltered,function(t){return t.year}),d3.max(dataFiltered,function(t){return t.year})]),yRange.domain([d3.min(dataFiltered,function(t){return t.maxima}),d3.max(dataFiltered,function(t){return t.maxima})]),d3.select(".yAxis").transition().duration(1e3).call(yAxis),d3.select(".xAxis").transition().duration(1e3).call(xAxis),d3.select(".legend-top").text("🔥 Temperaturas máximas");var e=svg.selectAll("circle").data(dataFiltered);e.transition().duration(1e3).attr("r",6).style("fill","#dc7176").attr("cx",function(t){return xRange(t.year)}).attr("cy",function(t){return yRange(t.maxima)}),e.on("mouseover",function(t){div.transition(),div.attr("class","tooltip tooltipMax"),div.style("opacity",1).html('<p class="tooltipRect">La temperatura máxima en '+t.year+" fue de "+t.maxima+"ºC<p/>").style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(t){div.transition().duration(200).style("opacity",0)}),e.exit().remove()})}function updateMin(){var t=d3.select("#updateButtonDay").property("value"),a=d3.select("#updateButtonMonth").property("value");t<10&&(t=("0"+t).slice(-2)),a<10&&(a=("0"+a).slice(-2));var i=new RegExp("^.*"+(t+"-"+a)+".*","gi");d3.csv("csv/temperaturas.csv",function(t,a){dataFilterMin=a.filter(function(t){return String(t.fecha).match(i)}),dataFilterMin.forEach(function(t){t.fecha=t.fecha,t.maxima=+t.maxima,t.minima=+t.minima,t.year=getYear(t.fecha)}),maxTemp=d3.max(dataFilterMin,function(t){return t.minima}),minTemp=d3.min(dataFilterMin,function(t){return t.minima}),xRange.domain([d3.min(dataFilterMin,function(t){return t.year}),d3.max(dataFilterMin,function(t){return t.year})]),yRange.domain([d3.min(dataFilterMin,function(t){return t.minima}),d3.max(dataFilterMin,function(t){return t.minima})]),d3.select(".yAxis").transition().duration(1e3).call(yAxis),d3.select(".xAxis").transition().duration(1e3).call(xAxis),d3.select(".legend-top").text("❄️ Temperaturas mínimas");var e=svg.selectAll("circle").data(dataFilterMin);e.transition().duration(1e3).attr("r",6).style("fill","#257d98").attr("cx",function(t){return xRange(t.year)}).attr("cy",function(t){return yRange(t.minima)}),e.on("mouseover",function(t){div.transition(),div.style("opacity",1),div.attr("class","tooltip tooltipMin").html('<p class="tooltipRect">La temperatura mínima en '+t.year+" fue de "+t.minima+"ºC<p/>").style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(t){div.transition().duration(200).style("opacity",0)}),e.exit().remove()})}d3.csv("csv/temperaturas.csv",function(t,a){(dataFiltered=a.filter(function(t){return String(t.fecha).match(/02-01/)})).forEach(function(t){t.fecha=t.fecha,t.maxima=+t.maxima,t.minima=+t.minima,t.year=getYear(t.fecha)}),maxTemp=d3.max(dataFiltered,function(t){return t.maxima}),minTemp=d3.min(dataFiltered,function(t){return t.maxima}),xRange.domain([d3.min(dataFiltered,function(t){return t.year}),d3.max(dataFiltered,function(t){return t.year})]),yRange.domain([d3.min(dataFiltered,function(t){return t.maxima}),d3.max(dataFiltered,function(t){return t.maxima})]),svg.append("g").attr("class","xAxis").attr("transform","translate(0,400)").transition().duration(1e3).call(xAxis),svg.append("g").attr("class","yAxis").attr("transform","translate(30, 0)").transition().duration(1e3).call(yAxis),svg.append("text").attr("class","legend-top").attr("transform","rotate(0)").attr("y",-20).attr("x",190).style("text-anchor","end").text("🔥Temperaturas máximas"),svg.selectAll("dot").data(dataFiltered).enter().append("circle").attr("class","circles").on("mouseover",function(t){div.transition(),div.attr("class","tooltip tooltipMax"),div.style("opacity",1).html('<p class="tooltipRect">La temperatura máxima en '+t.year+" fue de "+t.maxima+"ºC<p/>").style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(t){div.transition().duration(200).style("opacity",0)}).attr("r",0).attr("cx",function(t){return xRange(t.year)}).attr("cy",function(t){return yRange(t.maxima)}).transition().duration(1e3).attr("r",6).style("fill","#dc7176")});