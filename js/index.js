function loadCSV(){d3.csv("temperaturas-prueba.csv",function(t,a){datos=a,datos=a.filter(function(t){return String(t.fecha).match(/01-08/)}),console.log(datos),datos.forEach(function(t){t.fecha=t.fecha,t.maxima=+t.maxima,t.minima=+t.minima}),pintando()})}function pintando(){var t=d3.select("body").append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom);t.selectAll("rect").data(datos).enter().append("rect").attr("class","barra").attr("x",0).attr("y",0).attr("width",widthBar).attr("height",100).attr("x",function(t,a){return 21*a+300}).attr("height",function(t){return 5*t.maxima}).attr("y",function(t){return height-5*t.maxima}),t.selectAll("text").data(datos).enter().append("text").text(function(t){return t.maxima}).attr("x",function(t,a){return 21*a+300}).attr("y",function(t){return height-5.1*t.maxima}).attr("class","textoBarras"),t.selectAll("text.fecha").data(datos).enter().append("text").text(function(t){return formatTime(t.fecha)}).attr("x",function(t,a){return 21*a+300}).attr("y",function(t){return height+t.maxima}).attr("class","textoBarras")}var datos=[],margin={top:30,right:50,bottom:30,left:50},width=1200-margin.left-margin.right,height=350-margin.top-margin.bottom;widthBar=width/62;var parseDate=d3.time.format("%d-%b-%y").parse,formatTime=d3.time.format("%e %B");loadCSV();