function getYear(t){return t.split("-")[2]}function update(){var t=d3.select("#updateButtonDay").property("value"),a=d3.select("#updateButtonMonth").property("value");t<10&&(t=("0"+t).slice(-2)),a<10&&(a=("0"+a).slice(-2));var n=t+"-"+a,i=new RegExp("^.*"+n+".*","gi");d3.csv("csv/temperaturas.csv",function(t,a){(dataFiltered=a.filter(function(t){return String(t.fecha).match(i)})).forEach(function(t){t.fecha=t.fecha,t.maxima=+t.maxima,t.minima=+t.minima,t.year=getYear(t.fecha)}),maxTemp=d3.max(dataFiltered,function(t){return t.maxima}),minTemp=d3.min(dataFiltered,function(t){return t.maxima}),xRange.domain([d3.min(dataFiltered,function(t){return t.year}),d3.max(dataFiltered,function(t){return t.year})]),yRange.domain([d3.min(dataFiltered,function(t){return t.maxima}),d3.max(dataFiltered,function(t){return t.maxima})]),d3.select(".yAxis").transition().duration(1e3).call(yAxis),d3.select(".xAxis").transition().duration(1e3).call(xAxis),d3.select(".legend-top").text("Temperaturas máximas");var n=svg.selectAll("circle").data(dataFiltered);n.transition().duration(1e3).attr("r",function(t){return t.maxima===maxTemp?6*Math.sqrt(t.maxima/Math.PI):t.maxima===minTemp?6*Math.sqrt(t.maxima/Math.PI):4*Math.sqrt(t.maxima/Math.PI)}).attr("cx",function(t){return xRange(t.year)}).attr("cy",function(t){return yRange(t.maxima)}),n.style("fill",function(t){return t.maxima===maxTemp?"#70284a":t.maxima===minTemp?"#045275":color(t.maxima)}),n.on("mouseover",function(t){div.transition(),div.style("opacity",1).html('<p class="tooltipYear">'+t.year+'<p/><p class="tooltipTemp">'+t.maxima+"º<p/>").style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(t){div.transition().duration(200).style("opacity",0)}),n.exit().remove()})}function updateMin(){var t=d3.select("#updateButtonDay").property("value"),a=d3.select("#updateButtonMonth").property("value");t<10&&(t=("0"+t).slice(-2)),a<10&&(a=("0"+a).slice(-2));var n=t+"-"+a,i=new RegExp("^.*"+n+".*","gi");d3.csv("csv/temperaturas.csv",function(t,a){(dataFiltered=a.filter(function(t){return String(t.fecha).match(i)})).forEach(function(t){t.fecha=t.fecha,t.maxima=+t.maxima,t.minima=+t.minima,t.year=getYear(t.fecha)}),maxTemp=d3.max(dataFiltered,function(t){return t.minima}),minTemp=d3.min(dataFiltered,function(t){return t.minima}),xRange.domain([d3.min(dataFiltered,function(t){return t.year}),d3.max(dataFiltered,function(t){return t.year})]),yRange.domain([d3.min(dataFiltered,function(t){return t.minima}),d3.max(dataFiltered,function(t){return t.minima})]);d3.scaleLinear().domain([0,25]).range(["#b0f2bc","#89e8ac","#67dba5","#4cc8a3","#38b2a3","#2c98a0","#257d98"]);d3.select(".yAxis").transition().duration(1e3).call(yAxis),d3.select(".xAxis").transition().duration(1e3).call(xAxis),d3.select(".legend-top").text("Temperaturas mínimas");var n=svg.selectAll("circle").data(dataFiltered);n.transition().duration(1e3).attr("r",function(t){return t.minima>=20?11:t.minima>=18?10:t.minima>=14?9:t.minima>=10?8:t.minima>=5?7:t.minima>=0?6:t.minima<0?4:void 0}).attr("cx",function(t){return xRange(t.year)}).attr("cy",function(t){return yRange(t.minima)}),n.style("fill",function(t){return t.minima===minTemp?"#70284a":t.minima===minTemp?"#045275":t.minima>=20?"#b0f2bc":t.minima>=18?"#89e8ac":t.minima>=14?"#67dba5":t.minima>=10?"#4cc8a3":t.minima>=5?"#38b2a3":t.minima>=0?"#2c98a0":t.minima<=0?"#257d98":void 0}),n.on("mouseover",function(t){div.transition(),div.style("opacity",1).html('<p class="tooltipYear">'+t.year+'<p/><p class="tooltipTemp">'+t.minima+"º<p/>").style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(t){div.transition().duration(200).style("opacity",0)}),n.exit().remove()})}function resize(){widthH=parseInt(d3.select("#heladas").style("width")),widthH-=25;var t=d3.select(".chart-heladas");barpadding=1,xRangeH=d3.scaleLinear().domain([d3.min(datosH,function(t){return t.anyo}),d3.max(datosH,function(t){return t.anyo})]).range([30,widthH]),t.selectAll("rect").attr("width",widthH/datosH.length-barPadding).attr("fill",function(t,a){return colorsH(a)}).attr("x",function(t){return xRangeH(t.anyo)}).attr("y",function(t){return yRangeH(t.dias)}).attr("height",function(t){return heightH-yRangeH(t.dias)}),t.data(datosH).attr("width",widthH).select("g").attr("transform","translate(0,0)"),xRangeH.domain([d3.min(datosH,function(t){return t.anyo}),d3.max(datosH,function(t){return t.anyo})]),t.selectAll(".xAxis .tick").remove();var a=d3.axisBottom().scale(xRangeH).tickFormat(d3.format("d")).ticks(5);t.append("g").attr("class","xAxis").attr("transform","translate(0,400)").call(a)}function resizeT(){widthT=parseInt(d3.select("#tropicales").style("width")),widthT=widthH-25;var t=d3.select(".chart-tropicales");barpadding=1,xRangeT=d3.scaleLinear().domain([d3.min(datosT,function(t){return t.anyo}),d3.max(datosT,function(t){return t.anyo})]).range([30,widthT]),t.selectAll("rect").attr("width",widthT/datosT.length-barPadding).attr("fill",function(t,a){return colorsT(a)}).attr("x",function(t){return xRangeT(t.anyo)}).attr("y",function(t){return yRangeT(t.dias)}).attr("height",function(t){return heightT-yRangeT(t.dias)}),t.data(datosT).attr("width",widthT).select("g").attr("transform","translate(0,0)"),xRangeT.domain([d3.min(datosT,function(t){return t.anyo}),d3.max(datosT,function(t){return t.anyo})]),t.selectAll(".xAxis .tick").remove();var a=d3.axisBottom().scale(xRangeT).tickFormat(d3.format("d")).ticks(5);t.append("g").attr("class","xAxis").attr("transform","translate(0,400)").call(a)}function resizeRM(){widthRM=parseInt(d3.select("#rm-chart").style("width")),widthRM-=25;var t=d3.select(".record-chart-maximas");barpadding=1,xRangeRM=d3.scaleLinear().domain([d3.min(datosRM,function(t){return t.anyo}),d3.max(datosRM,function(t){return t.anyo})]).range([30,widthRM]),t.selectAll("rect").attr("width",widthRM/datosRM.length-barPadding).attr("fill",function(t,a){return colorsRM(a)}).attr("x",function(t){return xRangeRM(t.anyo)}).attr("y",function(t){return yRangeRM(t.dias)}).attr("height",function(t){return heightRM-yRangeRM(t.dias)}),t.data(datosRM).attr("width",widthRM).select("g").attr("transform","translate(0,0)"),xRangeRM.domain([d3.min(datosRM,function(t){return t.anyo}),d3.max(datosRM,function(t){return t.anyo})]),t.selectAll(".xAxis .tick").remove();var a=d3.axisBottom().scale(xRangeRM).tickFormat(d3.format("d")).ticks(5);t.append("g").attr("class","xAxis").attr("transform","translate(0,400)").call(a)}function resizeRMIN(){widthRMIN=parseInt(d3.select("#rmin-chart").style("width")),widthRMIN-=25;var t=d3.select(".record-chart-minimas");barpadding=1,xRangeRMIN=d3.scaleLinear().domain([d3.min(datosRMIN,function(t){return t.anyo}),d3.max(datosRMIN,function(t){return t.anyo})]).range([30,widthRMIN]),t.selectAll("rect").attr("width",widthRMIN/datosRMIN.length-barPadding).attr("fill",function(t,a){return colorsRMIN(a)}).attr("x",function(t){return xRangeRMIN(t.anyo)}).attr("y",function(t){return yRangeRMIN(t.dias)}).attr("height",function(t){return heightRMIN-yRangeRMIN(t.dias)}),t.data(datosRMIN).attr("width",widthRMIN).select("g").attr("transform","translate(0,0)"),xRangeRMIN.domain([d3.min(datosRMIN,function(t){return t.anyo}),d3.max(datosRMIN,function(t){return t.anyo})]),t.selectAll(".xAxis .tick").remove();var a=d3.axisBottom().scale(xRangeRMIN).tickFormat(d3.format("d")).ticks(5);t.append("g").attr("class","xAxis").attr("transform","translate(0,400)").call(a)}function resizeLLUMIN(){widthLLUMIN=parseInt(d3.select("#dias-lluvia").style("width")),widthLLUMIN-=25;var t=d3.select(".chart-lluvias");barpadding=1,xRangeLLUMIN=d3.scaleLinear().domain([d3.min(datosLLUMIN,function(t){return t.anual}),d3.max(datosLLUMIN,function(t){return t.anual})]).range([30,widthLLUMIN]),t.selectAll("rect").attr("width",widthLLUMIN/datosLLUMIN.length-barPadding).attr("fill",function(t,a){return colorsLLUMIN(a)}).attr("x",function(t){return xRangeLLUMIN(t.anual)}).attr("y",function(t){return yRangeLLUMIN(t.dias_lluvia)}).attr("height",function(t){return heightLLUMIN-yRangeLLUMIN(t.dias_lluvia)}),t.data(datosLLUMIN).attr("width",widthLLUMIN).select("g").attr("transform","translate(0,0)"),xRangeLLUMIN.domain([d3.min(datosLLUMIN,function(t){return t.anual}),d3.max(datosLLUMIN,function(t){return t.anual})]),t.selectAll(".xAxis .tick").remove();var a=d3.axisBottom().scale(xRangeLLUMIN).tickFormat(d3.format("d")).ticks(5);t.append("g").attr("class","xAxis").attr("transform","translate(0,400)").call(a)}function responsiveChart(){resize(),resizeT(),resizeRM(),resizeRMIN(),resizeLLUMIN()}var dataFiltered,xRange,yRange,xAxis,yAxis,temp="ºC",barPadding=2,dedicatoria="Dedicado a Maria del Carmen Tobajas Urieta y Agustín Aznar Gracia. Gracias por todo.";console.log(dedicatoria);var margin={top:50,right:50,bottom:50,left:110},width=1200-margin.left-margin.right,height=500-margin.top-margin.bottom,color=d3.scaleLinear().domain([10,35]).range(["#d39c83","#e34f6f","#7c1d6f"]),div=d3.select(".grafica-temp").append("div").attr("class","tooltip").style("opacity",0),svg=d3.select(".grafica-temp").append("svg").attr("class","chart-temp").attr("viewBox","0 0 "+(width+margin.left+margin.right)+" "+(height+margin.top+margin.bottom)).append("g").attr("transform","translate("+(margin.left-margin.right)+","+margin.top+")"),xRange=d3.scaleLinear().range([30,width]),yRange=d3.scaleLinear().range([height,-20]),xAxis=d3.axisBottom().scale(xRange).tickPadding(15).tickFormat(d3.format("d")).tickSize(-height).ticks(20),yAxis=d3.axisLeft().scale(yRange).tickPadding(10).tickFormat(function(t){return t+temp}).tickSize(30-width).ticks(6);d3.csv("csv/temperaturas.csv",function(t,a){(dataFiltered=a.filter(function(t){return String(t.fecha).match(/07-02/)})).forEach(function(t){t.fecha=t.fecha,t.maxima=+t.maxima,t.minima=+t.minima,t.year=getYear(t.fecha)}),maxTemp=d3.max(dataFiltered,function(t){return t.maxima}),minTemp=d3.min(dataFiltered,function(t){return t.maxima}),xRange.domain([d3.min(dataFiltered,function(t){return t.year}),d3.max(dataFiltered,function(t){return t.year})]),yRange.domain([d3.min(dataFiltered,function(t){return t.maxima}),d3.max(dataFiltered,function(t){return t.maxima})]),svg.append("g").attr("class","xAxis").attr("transform","translate(0,400)").transition().duration(1e3).call(xAxis),svg.append("g").attr("class","yAxis").attr("transform","translate(30, 0)").transition().duration(1e3).call(yAxis),svg.append("text").attr("class","legend-top").attr("transform","rotate(0)").attr("y",-20).attr("x",190).style("text-anchor","end").text("Temperaturas máximas"),svg.selectAll("dot").data(dataFiltered).enter().append("circle").attr("class","circles").on("mouseover",function(t){div.transition(),div.style("opacity",1).html('<p class="tooltipYear">'+t.year+'<p/><p class="tooltipTemp">'+t.maxima+"º<p/>").style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(t){div.transition().duration(200).style("opacity",0)}).transition().duration(1e3).attr("cx",function(t){return xRange(t.year)}).attr("cy",function(t){return yRange(t.maxima)}).attr("r",function(t){return t.maxima===maxTemp?6*Math.sqrt(t.maxima/Math.PI):t.maxima===minTemp?6*Math.sqrt(t.maxima/Math.PI):4*Math.sqrt(t.maxima/Math.PI)}).style("fill",function(t){return t.maxima===maxTemp?"#70284a":t.maxima===minTemp?"#045275":color(t.maxima)})});var barPadding=2,datosH=[],widthH=1200-(margin={top:50,right:50,bottom:50,left:110}).left-margin.right,heightH=500-margin.top-margin.bottom,svgH=d3.select(".heladas").append("svg").attr("class","chart-heladas").attr("width",widthH+margin.left+margin.right).attr("height",heightH+margin.top+margin.bottom).append("g").attr("transform","translate("+(margin.left-margin.right)+","+margin.top+")");widthBar=widthH/66;var xRangeH=d3.scaleLinear().range([30,widthH]),yRangeH=d3.scaleLinear().range([heightH,0]),xAxisH=d3.axisBottom().scale(xRangeH).tickFormat(d3.format("d")).ticks(5),yAxisH=d3.axisLeft().scale(yRangeH).tickSize(16-widthH).ticks(5),colorsH=d3.scaleLinear().domain([10,35]).range(["#68abb8","#4f90a6","#3b738f","#2a5674"]);d3.csv("csv/heladas.csv",function(t,a){(datosH=a).forEach(function(t){t.anyo=t.fecha,t.dia=t.dias}),xRangeH.domain([d3.min(datosH,function(t){return t.anyo}),d3.max(datosH,function(t){return t.anyo})]),yRangeH.domain([0,d3.max(datosH,function(t){return t.dia})]),svgH.append("g").attr("class","xAxis").attr("transform","translate(0,400)").call(xAxisH),svgH.append("g").attr("class","yAxis").attr("transform","translate(30, 0)").call(yAxisH),svgH.selectAll("rect").data(datosH).enter().append("rect").attr("class","barra").attr("width",widthH/datosH.length-barPadding).on("mouseover",function(t){div.transition(),div.style("opacity",1).html('<p class="tooltipHeladas">'+t.anyo+'<p/><p class="tooltipHeladas">'+t.dia+"<p/>").style("left",d3.event.pageX-50+"px").style("top",d3.event.pageY-100+"px")}).on("mouseout",function(t){div.transition().duration(200).style("opacity",0)}).attr("fill",function(t,a){return colorsH(a)}).attr("x",function(t){return xRangeH(t.anyo)}).attr("y",function(t){return yRangeH(t.dias)}).attr("height",function(t){return heightH-yRangeH(t.dias)})});var datosT=[],barPadding=2,width=window.innerWidth>0?window.innerWidth:screen.width,widthT=1200-(margin={top:50,right:50,bottom:50,left:110}).left-margin.right,heightT=500-margin.top-margin.bottom,svgT=d3.select(".tropicales").append("svg").attr("class","chart-tropicales").attr("width",widthT+margin.left+margin.right).attr("height",heightT+margin.top+margin.bottom).append("g").attr("transform","translate("+(margin.left-margin.right)+","+margin.top+")");widthBar=widthT/66;var xRangeT=d3.scaleLinear().range([30,widthT]),yRangeT=d3.scaleLinear().range([heightT,8]),xAxisT=d3.axisBottom().scale(xRangeT).tickFormat(d3.format("d")).ticks(20),yAxisT=d3.axisLeft().scale(yRangeT).tickSize(16-widthT).ticks(5),colorsT=d3.scaleLinear().domain([0,45]).range(["#ffc6c4","#f4a3a8","#e38191","#cc607d","#ad466c","#8b3058","#672044"]);d3.csv("csv/tropicales.csv",function(t,a){if((datosT=a).forEach(function(t){t.anyo=t.fecha,t.dia=t.dias}),xRangeT.domain([d3.min(datosT,function(t){return t.anyo}),d3.max(datosT,function(t){return t.anyo})]),yRangeT.domain([0,d3.max(datosT,function(t){return t.dia})]),svgT.append("g").attr("class","xAxis").attr("transform","translate(0,400)").call(xAxisT),svgT.append("g").attr("class","yAxis").attr("transform","translate(30, 0)").call(yAxisT),svgT.selectAll("rect").data(datosT).enter().append("rect").attr("class","barra").attr("width",widthT/datosT.length-barPadding).on("mouseover",function(t){div.transition(),div.style("opacity",1).html('<p class="tooltipTropicales">'+t.anyo+'<p/><p class="tooltipTropicales">'+t.dia+"<p/>").style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(t){div.transition().duration(200).style("opacity",0)}).attr("fill",function(t,a){return colorsT(a)}).attr("x",function(t){return xRangeT(t.anyo)}).attr("y",function(t){return yRangeT(t.dias)}).attr("height",function(t){return heightT-yRangeT(t.dias)}),width>768){var n=[{note:{label:"En 1991 se superan por primera vez las 30 noches",wrap:430},data:{anyo:"1991",dias:33},dy:-15,dx:-142},{note:{label:"En 2003 se superan por primera vez las 40 noches",wrap:430},data:{anyo:"2003",dias:47},dy:-10,dx:-252},{note:{label:"El 14 de junio de 2009 se registra la mínima más alta, 24.7ºC",wrap:500},data:{anyo:"2009",dias:40},dy:-10,dx:-252}].map(function(t){return t.note=Object.assign({},t.note),t.subject={radius:6},t});window.makeAnnotations=d3.annotation().annotations(n).type(d3.annotationCalloutCircle).accessors({x:function(t){return xRangeT(t.anyo)},y:function(t){return yRangeT(t.dias)}}).accessorsInverse({anyo:function(t){return xRangeT.invert(t.x)},dias:function(t){return yRangeT.invert(t.y)}}).on("subjectover",function(t){t.type.a.selectAll("g.annotation-connector, g.annotation-note").classed("hidden",!1)}).on("subjectout",function(t){t.type.a.selectAll("g.annotation-connector, g.annotation-note").classed("hidden",!0)}),svgT.append("g").attr("class","annotation-test").call(makeAnnotations),svgT.selectAll("g.annotation-connector, g.annotation-note").classed("hidden",!0)}});var barPadding=2,datosRM=[],widthRM=1200-(margin={top:50,right:50,bottom:50,left:110}).left-margin.right,heightRM=500-margin.top-margin.bottom,svgRM=d3.select(".maximas-chart-container").append("svg").attr("class","record-chart-maximas").attr("width",widthRM+margin.left+margin.right).attr("height",heightRM+margin.top+margin.bottom).append("g").attr("transform","translate("+(margin.left-margin.right)+","+margin.top+")");widthBar=widthRM/66;var xRangeRM=d3.scaleLinear().range([30,widthRM]),yRangeRM=d3.scaleLinear().range([heightRM,0]),xAxisRM=d3.axisBottom().scale(xRangeRM).tickFormat(d3.format("d")).ticks(5),yAxisRM=d3.axisLeft().scale(yRangeRM).tickSize(16-widthRM).ticks(5),colorsRM=d3.scaleLinear().domain([10,35]).range(["#cd669d","#9a366f","#690044","#230000"]);d3.csv("csv/record-maximas.csv",function(t,a){(datosRM=a).forEach(function(t){t.anyo=t.fecha,t.dia=t.dias}),xRangeRM.domain([d3.min(datosRM,function(t){return t.anyo}),d3.max(datosRM,function(t){return t.anyo})]),yRangeRM.domain([0,d3.max(datosRM,function(t){return t.dia})]),svgRM.append("g").attr("class","xAxis").attr("transform","translate(0,400)").call(xAxisRM),svgRM.append("g").attr("class","yAxis").attr("transform","translate(30, 0)").call(yAxisRM),svgRM.selectAll("rect").data(datosRM).enter().append("rect").attr("class","barra").attr("width",widthRM/datosRM.length-barPadding).on("mouseover",function(t){div.transition(),div.style("opacity",1).html('<p class="tooltipHeladas">'+t.anyo+'<p/><p class="tooltipHeladas">'+t.dia+"<p/>").style("left",d3.event.pageX-50+"px").style("top",d3.event.pageY-100+"px")}).on("mouseout",function(t){div.transition().duration(200).style("opacity",0)}).attr("fill",function(t,a){return colorsRM(a)}).attr("x",function(t){return xRangeRM(t.anyo)}).attr("y",function(t){return yRangeRM(t.dias)}).attr("height",function(t){return heightRM-yRangeRM(t.dias)})});var barPadding=2,datosRMIN=[],widthRMIN=1200-(margin={top:50,right:50,bottom:50,left:110}).left-margin.right,heightRMIN=500-margin.top-margin.bottom,svgRMIN=d3.select(".minimas-chart-container").append("svg").attr("class","record-chart-minimas").attr("width",widthRMIN+margin.left+margin.right).attr("height",heightRMIN+margin.top+margin.bottom).append("g").attr("transform","translate("+(margin.left-margin.right)+","+margin.top+")");widthBar=widthRMIN/66;var xRangeRMIN=d3.scaleLinear().range([30,widthRMIN]),yRangeRMIN=d3.scaleLinear().range([heightRMIN,0]),xAxisRMIN=d3.axisBottom().scale(xRangeRMIN).tickFormat(d3.format("d")).ticks(5),yAxisRMIN=d3.axisLeft().scale(yRangeRMIN).tickSize(16-widthRMIN).ticks(5),colorsRMIN=d3.scaleLinear().domain([10,35]).range(["#6893ff","#2166d7","#003da5","#000049"]);d3.csv("csv/record-minimas.csv",function(t,a){(datosRMIN=a).forEach(function(t){t.anyo=t.fecha,t.dia=t.dias}),xRangeRMIN.domain([d3.min(datosRMIN,function(t){return t.anyo}),d3.max(datosRMIN,function(t){return t.anyo})]),yRangeRMIN.domain([0,d3.max(datosRMIN,function(t){return t.dia})]),svgRMIN.append("g").attr("class","xAxis").attr("transform","translate(0,400)").call(xAxisRMIN),svgRMIN.append("g").attr("class","yAxis").attr("transform","translate(30, 0)").call(yAxisRMIN),svgRMIN.selectAll("rect").data(datosRMIN).enter().append("rect").attr("class","barra").attr("width",widthRMIN/datosRMIN.length-barPadding).on("mouseover",function(t){div.transition(),div.style("opacity",1).html('<p class="tooltipHeladas">'+t.anyo+'<p/><p class="tooltipHeladas">'+t.dia+"<p/>").style("left",d3.event.pageX-50+"px").style("top",d3.event.pageY-100+"px")}).on("mouseout",function(t){div.transition().duration(200).style("opacity",0)}).attr("fill",function(t,a){return colorsRMIN(a)}).attr("x",function(t){return xRangeRMIN(t.anyo)}).attr("y",function(t){return yRangeRMIN(t.dias)}).attr("height",function(t){return heightRMIN-yRangeRMIN(t.dias)})});var barPadding=2,datosLLUMIN=[],widthLLUMIN=1200-(margin={top:50,right:50,bottom:50,left:110}).left-margin.right,heightLLUMIN=500-margin.top-margin.bottom,svgLLUMIN=d3.select(".lluvias-chart-container").append("svg").attr("class","chart-lluvias").attr("width",widthLLUMIN+margin.left+margin.right).attr("height",heightLLUMIN+margin.top+margin.bottom).append("g").attr("transform","translate("+(margin.left-margin.right)+","+margin.top+")");widthBar=widthLLUMIN/66;var xRangeLLUMIN=d3.scaleLinear().range([30,widthLLUMIN]),yRangeLLUMIN=d3.scaleLinear().range([heightLLUMIN,0]),xAxisLLUMIN=d3.axisBottom().scale(xRangeLLUMIN).tickFormat(d3.format("d")).ticks(5),yAxisLLUMIN=d3.axisLeft().scale(yRangeLLUMIN).tickSize(16-widthLLUMIN).ticks(5),colorsLLUMIN=d3.scaleLinear().domain([10,35]).range(["#4f90a6","#3b738f","#2a5674"]);d3.csv("csv/dias-de-lluvia.csv",function(t,a){(datosLLUMIN=a).forEach(function(t){t.anual=t.fecha,t.dia=t.dias_lluvia}),xRangeLLUMIN.domain([d3.min(datosLLUMIN,function(t){return t.anual}),d3.max(datosLLUMIN,function(t){return t.anual})]),yRangeLLUMIN.domain([0,d3.max(datosLLUMIN,function(t){return t.dia})]),svgLLUMIN.append("g").attr("class","xAxis").attr("transform","translate(0,400)").call(xAxisLLUMIN),svgLLUMIN.append("g").attr("class","yAxis").attr("transform","translate(30, 0)").call(yAxisLLUMIN),svgLLUMIN.selectAll("rect").data(datosLLUMIN).enter().append("rect").attr("class","barra").attr("width",widthLLUMIN/datosLLUMIN.length-barPadding).on("mouseover",function(t){div.transition(),div.style("opacity",1).html('<p class="tooltipHeladas">'+t.anual+'<p/><p class="tooltipHeladas">'+t.dia+"<p/>").style("left",d3.event.pageX-50+"px").style("top",d3.event.pageY-100+"px")}).on("mouseout",function(t){div.transition().duration(200).style("opacity",0)}).attr("fill",function(t,a){return colorsLLUMIN(a)}).attr("x",function(t){return xRangeLLUMIN(t.anual)}).attr("y",function(t){return yRangeLLUMIN(t.dias_lluvia)}).attr("height",function(t){return heightLLUMIN-yRangeLLUMIN(t.dias_lluvia)})});var width=window.innerWidth>0?window.innerWidth:screen.width;d3.select(window).on("resize",function(){responsiveChart()}),width<=1024&&responsiveChart();