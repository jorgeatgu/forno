const dedicatoria="Dedicado a Maria del Carmen Tobajas Urieta y Agustín Aznar Gracia. Gracias por todo.";function menu(){var e=document.querySelector(".overlay"),t=document.querySelector(".navegacion"),a=document.querySelector("body"),c=document.querySelectorAll(".navegacion-btn"),n=document.querySelector(".burger");function s(){n.classList.toggle("clicked"),e.classList.toggle("show"),t.classList.toggle("show"),a.classList.toggle("overflow")}for(document.querySelector(".burger").addEventListener("click",s),document.querySelector(".overlay").addEventListener("click",s),i=0;i<c.length;i++)c[i].addEventListener("click",function(){r()});function r(){e.classList.remove("show"),t.classList.remove("show"),n.classList.remove("clicked")}}console.log(dedicatoria),menu();const scatterInput=()=>{const e=48,t=16,a=24,c=32;let n=0,i=0;const s=d3.select(".scatter-inputs"),r=s.select("svg"),o={};let l;const d=e=>e.split("-")[2],m=(e,t)=>{o.count.x.range([10,e]),o.count.y.range([t,-10])},u=e=>{const t=d3.axisBottom(o.count.x).tickPadding(10).tickFormat(d3.format("d")).tickSize(-i).ticks(20);e.select(".axis-x").attr("transform","translate(0,"+i+")").transition().duration(600).ease(d3.easeLinear).call(t);const a=d3.axisLeft(o.count.y).tickFormat(e=>e+"ºC").tickSize(-n).ticks(6);e.select(".axis-y").transition().duration(600).ease(d3.easeLinear).call(a)},p=l=>{const d=s.node().offsetWidth;n=d-c-t,i=500-e-a,r.attr("width",d).attr("height",500);const p="translate("+c+","+e+")",y=r.select(".scatter-inputs-container");y.attr("transform",p),m(n,i);const x=s.select(".scatter-inputs-container-dos").selectAll(".scatter-inputs-circles").data(l),g=x.enter().append("circle").attr("class","scatter-inputs-circles");x.merge(g).transition().duration(600).ease(d3.easeLinear).attr("cx",e=>o.count.x(e.year)).attr("cy",e=>o.count.y(e.minima)).attr("r",6).style("fill","#257d98"),u(y)};d3.select("#update").on("click",e=>{y()}),d3.select("#updateMin").on("click",e=>{x()});const y=()=>{let t=d3.select("#updateButtonDay").property("value"),a=d3.select("#updateButtonMonth").property("value");t<10&&(t=("0"+t).slice(-2)),a<10&&(a=("0"+a).slice(-2));let l=new RegExp("^.*"+(t+"-"+a)+".*","gi");d3.csv("csv/temperaturas.csv",(t,a)=>{(a=a.filter(e=>String(e.fecha).match(l))).forEach(e=>{e.fecha=e.fecha,e.maxima=+e.maxima,e.minima=+e.minima,e.year=d(e.fecha)}),o.count.x.range([10,n]),o.count.y.range([i,-10]);const p=d3.scaleTime().domain([d3.min(a,e=>e.year),d3.max(a,e=>e.year)]),y=d3.scaleLinear().domain([d3.min(a,e=>e.maxima),d3.max(a,e=>e.maxima)]);o.count={x:p,y:y};const x="translate("+c+","+e+")",g=r.select(".scatter-inputs-container");g.attr("transform",x),m(n,i);const f=s.select(".scatter-inputs-container-dos").selectAll(".scatter-inputs-circles").data(a),h=f.enter().append("circle").attr("class","scatter-inputs-circles");f.merge(h).transition().duration(600).ease(d3.easeLinear).attr("cx",e=>o.count.x(e.year)).attr("cy",e=>o.count.y(e.maxima)).attr("r",6).style("fill","#dc7176"),u(g)})},x=()=>{let e=d3.select("#updateButtonDay").property("value"),t=d3.select("#updateButtonMonth").property("value");e<10&&(e=("0"+e).slice(-2)),t<10&&(t=("0"+t).slice(-2));let a=new RegExp("^.*"+(e+"-"+t)+".*","gi");d3.csv("csv/temperaturas.csv",(e,t)=>{(t=t.filter(e=>String(e.fecha).match(a))).forEach(e=>{e.fecha=e.fecha,e.maxima=+e.maxima,e.minima=+e.minima,e.year=d(e.fecha)}),o.count.x.range([10,n]),o.count.y.range([i,-10]);const c=d3.scaleTime().domain([d3.min(t,e=>e.year),d3.max(t,e=>e.year)]),s=d3.scaleLinear().domain([d3.min(t,e=>e.minima),d3.max(t,e=>e.minima)]);o.count={x:c,y:s},p(t)})};window.addEventListener("resize",()=>{let e=d3.select("#updateButtonDay").property("value")+"-"+d3.select("#updateButtonMonth").property("value");d3.csv("csv/temperaturas.csv",(t,a)=>{(a=a.filter(t=>String(t.fecha).match(e))).forEach(e=>{e.fecha=e.fecha,e.maxima=+e.maxima,e.minima=+e.minima,e.year=d(e.fecha)}),o.count.x.range([10,n]),o.count.y.range([i,-10]);const c=d3.scaleTime().domain([d3.min(a,e=>e.year),d3.max(a,e=>e.year)]),s=d3.scaleLinear().domain([d3.min(a,e=>e.minima),d3.max(a,e=>e.minima)]);o.count={x:c,y:s},p(a)})}),d3.csv("csv/temperaturas.csv",(e,t)=>{e?console.log(e):(l=t,(l=t.filter(e=>String(e.fecha).match(/31-12/))).forEach(e=>{e.fecha=e.fecha,e.maxima=+e.maxima,e.minima=+e.minima,e.year=d(e.fecha)}),(()=>{const e=r.select(".scatter-inputs-container");e.append("g").attr("class","axis axis-x"),e.append("g").attr("class","axis axis-y"),e.append("g").attr("class","scatter-inputs-container-dos")})(),(()=>{const e=d3.scaleLinear().domain([d3.min(l,e=>e.year),d3.max(l,e=>e.year)]),t=d3.scaleLinear().domain([d3.min(l,e=>e.minima),d3.max(l,e=>e.minima)]);o.count={x:e,y:t}})(),p(l))})};scatterInput();