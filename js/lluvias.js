function lluviaMes(){function t(t){r.style("opacity",0),d3.csv("csv/meses-lluvia.csv",function(a,e){(e=e.filter(function(a){return String(a.mes).match(t)})).forEach(function(t){t.cantidad=+t.cantidad}),i.domain(e.map(function(t){return t.fecha})),s.domain([0,200]),d3.select(".yAxis").transition().duration(600).ease(d3.easeLinear).call(l),d3.select(".xAxis").transition().duration(600).ease(d3.easeLinear).call(xAxis);var c=o.selectAll("rect").data(e);c.transition().duration(600).ease(d3.easeLinear).attr("x",function(t){return i(t.fecha)}).attr("width",widthBar).attr("y",function(t){return s(t.cantidad)}).attr("height",function(t){return n-s(t.cantidad)}).on("mouseover",function(t){r.transition().duration(300).style("opacity",1),r.html('<div class="tooltip-lluvia-mes-container"><p class="tooltip-lluvia-mes">Lluvia recogida en '+t.mes+'<span class="tooltip-lluvia-mes-total">: '+t.cantidad+'mm</span><p/><p class="tooltip-lluvia-mes">Lluvia recogida en '+t.fecha+'<span class="tooltip-lluvia-mes-total">: '+t.totalanyo+"mm</span><p/></div>")}),c.exit().remove()})}var a={top:50,right:50,bottom:50,left:110},e=1200-a.left-a.right,n=500-a.top-a.bottom;widthBar=e/100;var i=d3.scaleBand().range([0,e]),s=d3.scaleLinear().range([n,0]),l=d3.axisLeft(s).tickPadding(5).tickSize(-e),o=d3.select(".lluvias-por-mes-chart-container").append("svg").attr("class","lluvias-mes-media-chart-graph").attr("width",e+a.left+a.right).attr("height",n+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")"),r=d3.select(".lluvias-por-mes-chart-container").append("div").attr("class","tooltip-container").style("opacity",1);d3.csv("csv/meses-lluvia.csv",function(a,e){if(a)throw a;var c=d3.nest().key(function(t){return t.mes}).entries(e),d=d3.select("#mes");d.append("select").selectAll("option").data(c).enter().append("option").attr("value",function(t){return t.key}).text(function(t){return t.key}),d.on("change",function(){var a=d3.select(this).select("select").property("value");t(a),console.log(a)}),(e=e.filter(function(t){return String(t.mes).match(/ENERO/)})).forEach(function(t){t.cantidad=+t.cantidad,t.totalanyo=+t.totalanyo}),i.domain(e.map(function(t){return t.fecha})),s.domain([0,185]);var u=d3.axisBottom(i).tickValues(i.domain().filter(function(t,a){return!(a%4)}));o.selectAll(".bar").data(e).enter().append("rect").attr("class","bar").attr("x",function(t){return i(t.fecha)}).attr("width",widthBar).attr("y",function(t){return s(t.cantidad)}).attr("height",function(t){return n-s(t.cantidad)}).on("mouseover",function(t){r.transition().duration(300).style("opacity",1),r.html('<div class="tooltip-lluvia-mes-container"><p class="tooltip-lluvia-mes">Lluvia recogida en '+t.mes+'<span class="tooltip-lluvia-mes-total">: '+t.cantidad+'mm</span><p/><p class="tooltip-lluvia-mes">Lluvia recogida en '+t.fecha+'<span class="tooltip-lluvia-mes-total">: '+t.totalanyo+"mm</span><p/></div>")}),o.append("g").attr("transform","translate(0,"+n+")").attr("class","xAxis").call(u),o.append("g").attr("class","yAxis").call(l)})}mesMenu=[],lluviaMes();