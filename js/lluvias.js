function lluviaMes(){var t=50,a=50,e=50,n=110,s=1200-n-a,l=500-t-e;widthBar=s/90;var o=d3.scaleBand().range([0,s]),c=d3.scaleLinear().range([l,0]),d=d3.axisLeft(c).tickPadding(5).ticks(22).tickSize(-s),u=d3.select(".lluvias-por-mes-chart-container").append("svg").attr("class","lluvias-mes-media-chart-graph").attr("width",s+n+a).attr("height",l+t+e).append("g").attr("transform","translate("+n+","+t+")"),m=d3.select(".lluvias-por-mes-chart-container").append("div").attr("class","tooltip-container").style("opacity",1);d3.csv("csv/meses-lluvia.csv",function(t,a){if(t)throw t;var e=d3.nest().key(function(t){return t.mes}).entries(a),n=d3.select("#mes");n.append("select").selectAll("option").data(e).enter().append("option").attr("value",function(t){return t.key}).text(function(t){return t.key}),n.on("change",function(){var r,t=d3.select(this).select("select").property("value");r=t,m.style("opacity",0),d3.csv("csv/meses-lluvia.csv",function(t,a){(a=a.filter(function(t){return String(t.mes).match(r)})).forEach(function(t){t.cantidad=+t.cantidad}),o.domain(a.map(function(t){return t.fecha})),c.domain([0,185]),d3.select(".yAxis").transition().duration(600).call(d),d3.select(".xAxis").transition().duration(600).call(xAxis);var e=u.selectAll("rect").data(a);e.transition().duration(600).ease(d3.easeLinear).attr("y",function(t){return c(t.cantidad)}).attr("height",function(t){return l-c(t.cantidad)}),e.exit().remove();var n=u.select(".promedio").data(a);n.transition().duration(600).ease(d3.easeLinear).attr("y1",function(t){return c(t.media)}).attr("x2",s).attr("y2",function(t){return c(t.media)}),n.exit().remove();var i=u.select("textoPromedio").data(a);i.attr("y",function(t){return c(t.media)-5}),i.exit().remove()})}),(a=a.filter(function(t){return String(t.mes).match(/ENERO/)})).forEach(function(t){t.cantidad=+t.cantidad,t.totalanyo=+t.totalanyo,t.media=+t.media}),o.domain(a.map(function(t){return t.fecha})),c.domain([0,185]);var i=d3.axisBottom(o).tickValues(o.domain().filter(function(t,a){return!(a%4)}));u.selectAll(".bar").data(a).enter().append("rect").attr("class","bar").attr("x",function(t){return o(t.fecha)}).attr("width",widthBar).attr("y",function(t){return c(t.cantidad)}).attr("height",function(t){return l-c(t.cantidad)}).on("mouseover",function(t){m.transition().duration(300).style("opacity",1),m.html('<div class="tooltip-lluvia-mes-container"><p class="tooltip-lluvia-mes">Lluvia acumulada en '+t.mes+'<span class="tooltip-lluvia-mes-total">: '+t.cantidad+'mm</span><p/><p class="tooltip-lluvia-mes">Lluvia acumulada en '+t.fecha+'<span class="tooltip-lluvia-mes-total">: '+t.totalanyo+'mm</span><p/><p class="tooltip-lluvia-mes">La media en '+t.mes+' es de<span class="tooltip-lluvia-mes-total">: '+t.media+"mm</span><p/></div>")}),u.append("g").attr("transform","translate(0,"+l+")").attr("class","xAxis").call(i),u.append("g").attr("class","yAxis").call(d),u.append("line").data(a).attr("class","promedio").attr("x1",0).attr("y1",function(t){return c(t.media)}).attr("x2",s).attr("y2",function(t){return c(t.media)}).attr("stroke","#044c71").attr("stroke-width",2)})}mesMenu=[],lluviaMes();